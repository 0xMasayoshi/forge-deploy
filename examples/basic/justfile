setup
    cargo install --locked 0.0.1 --root . forge-deploy

compile:
    forge-deploy gen-deployer && forge build

gen-deployer:
    forge-deploy gen-deployer

sync:
    forge-deploy sync


deploy $MODE="localhost": (compile)
    ldenv just _deploy
_deploy:
    forge script script/DeployGreetingsRegistry.s.sol --rpc-url $RPC_URL --broadcast --private-key $DEPLOYER_PRIVATE_KEY -v && forge-deploy sync

deploy_void $MODE="void": (compile)
    ldenv just _deploy_void
_deploy_void:
    forge script script/DeployGreetingsRegistry.s.sol --private-key $DEPLOYER_PRIVATE_KEY -vvvv


# Testing forge-deploy
export PATH := "./node_modules/.bin:" + "../../target/debug:" + env_var('PATH')

load context:
    ldenv -m {{context}} env

